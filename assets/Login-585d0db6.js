import{U as d}from"./user-1d480d27.js";import{U as m,J as p,K as h,L as t,n as s,R as n,Q as f}from"./index-bf525995.js";import{_ as g}from"./VAvatar-26ba638e.js";import{d as V,a as c,c as w,V as _}from"./VCard-04090dfd.js";import{V as C,a as l}from"./VTextField-ebe460cb.js";import{V as b}from"./VBtn-0a240091.js";import"./index-cdd36948.js";const k={name:"Login",data(){return{user:new d("","","",""),rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters",emailMatch:()=>"The email and password you entered don't match"},usernameRules:[e=>(e==null?void 0:e.length)>3?!0:"Имя пользователя должно содержать минимум 3 символа."],loading:!1,message:""}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin(){this.loading=!0,this.user.username&&this.user.password&&this.$store.dispatch("auth/login",this.user).then(()=>{this.$store.dispatch("auth/setProfileData"),this.$router.push("/profile")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}};function y(e,r,L,T,o,u){const i=m("router-link");return p(),h(V,null,{default:t(()=>[s(_,null,{default:t(()=>[s(c,null,{default:t(()=>[n(" Авторизация ")]),_:1}),s(w,null,{default:t(()=>[s(C,{name:"form",onSubmit:f(u.handleLogin,["prevent"])},{default:t(()=>[s(l,{modelValue:o.user.username,"onUpdate:modelValue":r[0]||(r[0]=a=>o.user.username=a),label:"Имя пользователя",rules:o.usernameRules},null,8,["modelValue","rules"]),s(l,{modelValue:o.user.password,"onUpdate:modelValue":r[1]||(r[1]=a=>o.user.password=a),"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[o.rules.required],type:e.show1?"text":"password",name:"input-10-1",label:"Пароль",hint:"At least 8 characters",counter:"","onClick:append":r[2]||(r[2]=a=>e.show1=!e.show1)},null,8,["modelValue","append-icon","rules","type"]),s(b,{type:"submit",block:"",class:"mt-2"},{default:t(()=>[n("Войти")]),_:1})]),_:1},8,["onSubmit"]),s(i,{to:"/register"},{default:t(()=>[n("Зарегистрироваться")]),_:1})]),_:1})]),_:1})]),_:1})}const S=g(k,[["render",y]]);export{S as default};
