import{U as i}from"./user-1d480d27.js";import{J as d,K as m,L as a,n as s,R as n,Q as p}from"./index-e5ee06f2.js";import{_ as h}from"./VAvatar-ee3fb148.js";import{d as f,a as g,c as V,V as c}from"./VCard-2d3a232c.js";import{V as w,a as l}from"./VTextField-ec68c5e6.js";import{V as b}from"./VBtn-7f686220.js";import"./index-df71d2ee.js";const y={name:"Login",data(){return{user:new i("","","",""),rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters",emailMatch:()=>"The email and password you entered don't match"},usernameRules:[e=>(e==null?void 0:e.length)>3?!0:"Имя пользователя должно содержать минимум 3 символа."],loading:!1,message:""}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin(){this.loading=!0,this.user.username&&this.user.password&&this.$store.dispatch("auth/login",this.user).then(()=>{this.$store.dispatch("auth/setProfileData"),this.$router.push("/profile")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}};function C(e,t,L,T,r,u){return d(),m(f,null,{default:a(()=>[s(c,null,{default:a(()=>[s(g,null,{default:a(()=>[n(" Авторизация ")]),_:1}),s(V,null,{default:a(()=>[s(w,{name:"form",onSubmit:p(u.handleLogin,["prevent"])},{default:a(()=>[s(l,{modelValue:r.user.username,"onUpdate:modelValue":t[0]||(t[0]=o=>r.user.username=o),label:"Имя пользователя",rules:r.usernameRules},null,8,["modelValue","rules"]),s(l,{modelValue:r.user.password,"onUpdate:modelValue":t[1]||(t[1]=o=>r.user.password=o),"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[r.rules.required],type:e.show1?"text":"password",name:"input-10-1",label:"Пароль",hint:"At least 8 characters",counter:"","onClick:append":t[2]||(t[2]=o=>e.show1=!e.show1)},null,8,["modelValue","append-icon","rules","type"]),s(b,{type:"submit",block:"",class:"mt-2"},{default:a(()=>[n("Войти")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const I=h(y,[["render",C]]);export{I as default};
