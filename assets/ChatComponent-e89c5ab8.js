import{l as C}from"./index-7f83b671.js";import{a as $,J as n,K as l,L as t,n as e,Q as b,M as _,G as v,N as S,S as d,U as f}from"./index-e5ee06f2.js";import{_ as i}from"./VAvatar-ee3fb148.js";import{V as M,a as N}from"./VTextField-ec68c5e6.js";import{V as y}from"./VRow-7ee72a6f.js";import{V as h}from"./VCol-1397f2ac.js";import{V as B}from"./VBtn-7f686220.js";import{d as c,V as x}from"./VCard-2d3a232c.js";$({connected:!1,fooEvents:[],barEvents:[]});const k="http://localhost:8081",g=C(k),q={name:"MessageBox",data(){return{text:"",rules:{required:s=>!!s||"Required.",counter:s=>s.length<=140||"Max 140 characters"}}},computed:{user(){return this.$store.state.auth.user}},props:{roomName:{type:String,required:!0}},methods:{onSubmit(){g.emit("new message",{roomName:this.roomName,text:this.text,user:this.user}),this.text=""}}};function w(s,a,m,p,o,u){return n(),l(c,null,{default:t(()=>[e(M,{name:"form",onSubmit:b(u.onSubmit,["prevent"])},{default:t(()=>[e(y,null,{default:t(()=>[e(h,{cols:"9"},{default:t(()=>[e(N,{modelValue:o.text,"onUpdate:modelValue":a[0]||(a[0]=r=>o.text=r),rules:[o.rules.required,o.rules.counter],counter:""},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"auto"},{default:t(()=>[e(B,{type:"submit",icon:"mdi-send"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const L=i(q,[["render",w]]),E={name:"MessagesList",data(){return{messages:[]}},mounted(){g.on("new message",s=>{this.messages.push(s)})}};function F(s,a,m,p,o,u){return n(),l(c,null,{default:t(()=>[(n(!0),_(v,null,S(o.messages,r=>(n(),_("p",null,d(r.user?r.user.username:"")+": "+d(r.text),1))),256))]),_:1})}const R=i(E,[["render",F]]);const U={name:"ChatComponent",components:{MessagesList:R,MessageBox:L},props:{roomName:{type:String,required:!0}}};function D(s,a,m,p,o,u){const r=f("messages-list"),V=f("message-box");return n(),l(c,null,{default:t(()=>[e(x,null,{default:t(()=>[e(x,{"max-height":"500"},{default:t(()=>[e(r)]),_:1}),e(V,{"room-name":m.roomName},null,8,["room-name"])]),_:1})]),_:1})}const A=i(U,[["render",D],["__scopeId","data-v-0d5ee5d8"]]);export{A as C,g as s};
